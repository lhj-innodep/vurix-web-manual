<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VURIX Mobile 웹 매뉴얼</title>
  <style>
    :root {
      --header1-h: 56px;   /* 타이틀 바 높이 */
      --header2-h: 48px;   /* 메뉴 바 높이 */
      --footer-h: 40px;    /* 푸터 높이 */
      --bar-bg: #f6f6f6;   /* 상단 고정바 배경색 */
      --gh-border:#d0d7de;
      --gh-active:#0969da;
      --scale: 1.5;        /* PC 확대 배율 */
    }
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", "맑은 고딕", Arial, sans-serif;
      color: #222;
      background: #fff;
    }

    /* 상단 타이틀 바 */
    .top-title {
      position: fixed;
      top: 0; left: 0; right: 0;
      height: var(--header1-h);
      background: var(--bar-bg);
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 0 16px;
      border-bottom: none; /* 줄 제거 */
      z-index: 1000;
    }
    .title-btn {
      font-size: 18px;
      font-weight: 700;
      color: #111;
      text-decoration: none;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      cursor: default; /* 클릭 동작 없음 */
    }
    .title-btn img[src*="0_ICON"] {
      height: 1em; width: auto; vertical-align: middle;
    }

    /* 상단 메뉴 (GitHub 스타일 탭) */
    .top-menu {
      position: fixed;
      top: var(--header1-h); left: 0; right: 0;
      height: var(--header2-h);
      background: var(--bar-bg);
      display: flex;
      align-items: end;
      border-bottom: 1px solid var(--gh-border);
      z-index: 999;
      overflow: hidden; /* PC에서 스크롤바 숨김 */
    }
    .menu-list {
      display: flex;
      gap: 12px;
      padding: 0 12px 0 12px;
      height: 100%;
      align-items: end;
      flex-wrap: nowrap;
    }
    .menu-item {
      position: relative;
      background: transparent;
      border: 0;
      cursor: pointer;
      padding: 0 12px 10px 12px;
      height: 100%;
      display: flex;
      align-items: end;
      font-size: 15px;
      color: #24292f;
      border-radius: 0;
      white-space: nowrap;
    }
    .menu-item:hover { color: #111; }
    .menu-item.active { color: #111; font-weight: 600; }
    .menu-item.active::after {
      content: ""; position: absolute; left: 8px; right: 8px; bottom: -1px; height: 2px;
      background: var(--gh-active);
    }

    /* 콘텐츠 영역 */
    .content-wrap {
      position: fixed;
      left: 0; right: 0;
      top: calc(var(--header1-h) + var(--header2-h));
      bottom: var(--footer-h);
      padding-left: 20px; /* 좌측 여백 요구사항 */
      background: #fff;
    }
    .content-inner {
      width: 100%;
      height: 100%;
      display: block;
    }
    iframe#contentFrame {
      width: 100%;
      height: 100%;
      border: none;
      background: #fff;
      display: block;
    }

    /* 하단 고정 푸터 */
    .footer {
      position: fixed;
      left: 0; right: 0; bottom: 0;
      height: var(--footer-h);
      background: #fff; /* 콘텐츠와 동일 */
      border-top: none; /* 경계선 제거 */
      display: flex;
      align-items: center;
      justify-content: flex-start; /* 좌측 정렬 */
      padding-left: 20px;
      font-size: 12px;
      color: #666;
      z-index: 1000;
    }

    /* 반응형 */
    @media (max-width: 768px) {
      :root { --header1-h: 52px; --header2-h: 48px; --footer-h: 40px; }
      .menu-list { flex-wrap: wrap; row-gap: 6px; }
      .menu-item { font-size: 14px; padding: 0 10px 10px 10px; }
      .top-menu { overflow: hidden; }
      html, body { overflow: auto; }
    }

    /* PC에서는 바깥 스크롤 제거, iframe만 스크롤 */
    @media (min-width: 1024px) {
      html, body { overflow: hidden; }
    }
  </style>
</head>
<body>
  <!-- 상단 두 줄 고정바 -->
  <header class="top-title" role="banner">
    <span class="title-btn" id="titleText">VURIX Mobile</span>
  </header>

  <nav class="top-menu" role="navigation" aria-label="주 메뉴">
    <div class="menu-list" id="menuList">
      <button class="menu-item" data-src="./start.html">시작</button>
      <button class="menu-item" data-src="./live.html">실시간 영상</button>
      <button class="menu-item" data-src="./recorded.html">녹화 영상</button>
      <button class="menu-item" data-src="./event.html">이벤트</button>
      <button class="menu-item" data-src="./setup.html">설정</button>
      <button class="menu-item" data-src="./other.html">기타</button>
      <button class="menu-item" data-src="./info.html">참고</button>
    </div>
  </nav>

  <!-- 중앙 콘텐츠 영역 -->
  <main class="content-wrap" role="main">
    <div class="content-inner">
      <iframe id="contentFrame" title="콘텐츠 프레임" src="" loading="lazy" referrerpolicy="no-referrer"></iframe>
    </div>
  </main>

  <!-- 하단 고정바 -->
  <footer class="footer" role="contentinfo">©2025 Innodep, Inc.</footer>

  <script>
    (function () {
      const iframe = document.getElementById('contentFrame');
      const menuButtons = Array.from(document.querySelectorAll('.menu-item'));
      const menuList = document.getElementById('menuList');

      // 메뉴 클릭 시 iframe만 교체
      function setActive(btn) {
        menuButtons.forEach(b => b.classList.toggle('active', b === btn));
      }
      function loadSrc(src, btn) {
        iframe.src = src;
        if (btn) setActive(btn);
        // 해시 갱신
        if (location.hash !== '#' + src.replace('./', '')) {
          history.replaceState(null, '', '#' + src.replace('./', ''));
        }
      }

      // 해시 경로로 초기 진입 처리
      function initialLoadFromHash(){
        const hash = location.hash.replace(/^#/, '');
        const targetBtn = menuButtons.find(b => b.dataset.src.replace('./','') === hash);
        if (targetBtn){
          loadSrc(targetBtn.dataset.src, targetBtn);
          return true;
        }
        return false;
      }

      // 초기 진입 시 start.html 자동 로드
      document.addEventListener('DOMContentLoaded', () => {
        if (!initialLoadFromHash()){
          const defaultBtn = menuButtons.find(b => b.textContent.trim() === '시작') || menuButtons[0];
          if (defaultBtn) loadSrc(defaultBtn.dataset.src, defaultBtn);
        }
      });

      // 메뉴 이벤트 바인딩
      menuButtons.forEach(btn => {
        btn.addEventListener('click', () => loadSrc(btn.dataset.src, btn));
      });

      // 해시 변경 시 반영
      window.addEventListener('hashchange', initialLoadFromHash);

      // --- 내부 문서 첫 대제목 상단 여백 제거 보정 ---
      function removeTopMarginOnFirstHeading(doc){
        try {
          // 강제 스타일 주입 (마진 접힘 방지 포함)
          const style = doc.createElement('style');
          style.textContent = `
            html, body { margin: 0 !important; padding-top: 0 !important; }
            body { display: flow-root !important; }
            body > *:first-child { margin-top: 0 !important; }
            ._1-1-Heading:first-of-type {
              margin-top: 0 !important; padding-top: 0 !important;
            }
            p._1-1-Heading:first-of-type { margin-block-start: 0 !important; }
          `;
          doc.head && doc.head.appendChild(style);

          // 실제 첫 번째 _1-1-Heading 인라인 보정
          const firstHeading = doc.querySelector('._1-1-Heading');
          if (firstHeading) {
            firstHeading.style.setProperty('margin-top', '0', 'important');
            firstHeading.style.setProperty('padding-top', '0', 'important');
          }

          // 첫 2~3개 요소의 과도한 상단마진 제거
          let el = doc.body && doc.body.firstElementChild;
          let checked = 0;
          while (el && checked < 3) {
            const cs = doc.defaultView.getComputedStyle(el);
            const mt = parseFloat(cs.marginTop || '0');
            const isEmpty = (el.textContent || '').trim() === '' && !el.querySelector('img, video, canvas, svg');
            if (mt > 0 && (isEmpty || el.classList.contains('_1-1-Heading'))) {
              el.style.setProperty('margin-top', '0', 'important');
              el.style.setProperty('padding-top', '0', 'important');
            }
            if (el.classList.contains('_1-1-Heading')) break;
            el = el.nextElementSibling;
            checked++;
          }
        } catch(e){}
      }

      // 아이콘 리사이즈 & PC에서 내부 확대
      function enhanceIframe() {
        try {
          const doc = iframe.contentDocument || iframe.contentWindow.document;
          if (!doc) return;

          // 아이콘 자동 리사이즈
          const icons = doc.querySelectorAll('img[src*="0_ICON"]');
          icons.forEach(img => {
            img.style.height = '1em';
            img.style.width = 'auto';
            img.style.verticalAlign = 'middle';
          });

          // 첫 대제목 상단 여백 제거
          removeTopMarginOnFirstHeading(doc);

          // 데스크톱에서만 내부 확대
          if (window.matchMedia('(min-width: 1024px)').matches) {
            const bodyEl = doc.body;
            if (bodyEl) {
              bodyEl.style.zoom = '1.5';
              bodyEl.style.transformOrigin = 'top left';
              // zoom 미지원 브라우저 폴백
              if (!bodyEl.style.zoom) {
                bodyEl.style.transform = 'scale(1.5)';
                bodyEl.style.width = 'calc(100% / 1.5)';
              }
            }
            // 내부 최소 폭 보장
            const htmlEl = doc.documentElement;
            if (htmlEl) {
              htmlEl.style.minWidth = '900px';
            }
          } else {
            // 모바일: 원배율
            const bodyEl = doc.body;
            if (bodyEl) {
              bodyEl.style.zoom = '';
              bodyEl.style.transform = '';
              bodyEl.style.width = '';
            }
          }
        } catch (e) {
          // 다른 출처나 접근 불가 시 조용히 무시
        }
      }

      iframe.addEventListener('load', enhanceIframe);
    })();
  </script>
</body>
</html>
