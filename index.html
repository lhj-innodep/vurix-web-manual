<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>VURIX Mobile 웹 매뉴얼</title>
  <style>
    :root{
      --header1-h:56px;   /* 타이틀 바 높이 */
      --header2-h:56px;   /* 메뉴 바 예상 높이 (실측으로 덮어씀) */
      --header2-computed:56px;
      --footer-h:40px;    /* 푸터 높이 */
      --bar-bg:#f6f6f6;   /* 상단 고정바 배경 */
      --gh-border:#d0d7de;
      --gh-active:#0969da;
      --scale:1.5;        /* PC 확대 배율 */
      --fixed-width:900px;/* 내부 기준 폭 */
      --gap-cf:14px;      /* 콘텐츠-푸터 간격 */
      --vh:1vh;           /* 모바일 뷰포트 보정 */
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:#fff;color:#222;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic","맑은 고딕",Arial,sans-serif}

    /* 상단 타이틀 */
    .top-title{
      position:fixed;top:0;left:0;right:0;height:var(--header1-h);
      background:var(--bar-bg);display:flex;align-items:center;gap:12px;
      padding:0 16px;border-bottom:none; /* 줄 제거 */
      z-index:1000;
    }
    .title-text{font-size:18px;font-weight:700;color:#111;white-space:nowrap;}

    /* 상단 메뉴 (GitHub 탭 느낌, 좌측 정렬 강제) */
    .top-menu{
      position:fixed;top:var(--header1-h);left:0;right:0;
      background:var(--bar-bg);
      display:flex;align-items:flex-end;justify-content:flex-start; /* 좌정렬 */
      border-bottom:1px solid var(--gh-border);
      overflow-x:hidden;overflow-y:hidden; /* 스크롤바 차단 */
      z-index:999;
    }
    .menu-list{
      display:flex;
      gap:16px;
      padding:0 12px 0 12px;
      margin:0 !important;                 /* 중심 정렬 방지 */
      justify-content:flex-start !important;/* 좌정렬 보장 */
      align-items:flex-end;
      flex-wrap:nowrap;                     /* 데스크톱: 한 줄 */
      width:auto; max-width:none;
    }
    .menu-item{
      position:relative;background:transparent;border:0;cursor:pointer;
      padding:0 8px 12px 8px;height:56px;display:flex;align-items:flex-end;
      font-size:15px;color:#24292f;border-radius:0;white-space:nowrap;
    }
    .menu-item:hover{color:#111;}
    .menu-item.active{color:#111;font-weight:600;}
    .menu-item.active::after{
      content:"";position:absolute;left:6px;right:6px;bottom:-1px;height:2px;background:var(--gh-active);
    }

    /* 콘텐츠 영역: 뷰포트-헤더-푸터로 계산, 하단 여백 포함 */
    .content-wrap{
      position:fixed;left:0;right:0;
      top:calc(var(--header1-h) + var(--header2-computed));
      bottom:calc(var(--footer-h) + var(--gap-cf));
      padding-left:20px;background:#fff;
      overflow:hidden; /* PC에선 바깥 스크롤 제거, 내부 iframe만 스크롤 */
    }

    /* iframe 컨테이너: 가로 스크롤 허용(창이 좁아져도 크기 유지) */
    .content-inner{
      height:100%;
      min-width: calc(var(--fixed-width) * var(--scale)); /* 900 * 1.5 = 1350 */
      overflow-x:auto; overflow-y:hidden;
    }
    iframe#contentFrame{
      width:100%; height:100%;
      border:none; background:#fff; display:block;
    }

    /* 푸터 */
    .footer{
      position:fixed;left:0;right:0;bottom:0;height:var(--footer-h);
      background:#fff;border-top:none;
      display:flex;align-items:center;justify-content:flex-start;
      padding-left:20px;font-size:12px;color:#666;z-index:1000;
    }

    /* 모바일(≤730px) 전용: 메뉴 줄바꿈, 페이지 스크롤 사용 */
    @media (max-width: 730px){
      :root{--header1-h:52px;--header2-h:48px;--footer-h:40px;}
      .menu-item{font-size:14px;height:48px;padding-bottom:10px;}
      .menu-list{flex-wrap:wrap; row-gap:6px; justify-content:flex-start !important;}
      .content-wrap{ top:calc(var(--header1-h) + var(--header2-computed)); bottom:calc(var(--footer-h) + var(--gap-cf)); overflow:visible; }
      .content-inner{ min-width:0; overflow-x:visible; overflow-y:visible; }
      html, body{ overflow-y:auto; } /* 모바일: 페이지 스크롤 */
    }

    /* PC: 페이지 스크롤 숨김(스크롤은 iframe 하나) */
    @media (min-width: 1024px){
      html, body{ overflow:hidden; }
    }
  </style>
</head>
<body>
  <!-- 상단 고정바 -->
  <header class="top-title" role="banner">
    <span class="title-text">VURIX Mobile</span>
  </header>

  <nav class="top-menu" role="navigation" aria-label="주 메뉴">
    <div class="menu-list">
      <button class="menu-item" data-src="./start.html">시작</button>
      <button class="menu-item" data-src="./live.html">실시간 영상</button>
      <button class="menu-item" data-src="./recorded.html">녹화 영상</button>
      <button class="menu-item" data-src="./event.html">이벤트</button>
      <button class="menu-item" data-src="./setup.html">설정</button>
      <button class="menu-item" data-src="./other.html">기타</button>
      <button class="menu-item" data-src="./info.html">참고</button>
    </div>
  </nav>

  <!-- 중앙 콘텐츠 -->
  <main class="content-wrap" role="main">
    <div class="content-inner">
      <iframe id="contentFrame" title="콘텐츠 프레임" src="" loading="lazy" referrerpolicy="no-referrer"></iframe>
    </div>
  </main>

  <!-- 하단바 -->
  <footer class="footer" role="contentinfo">©2025 Innodep, Inc.</footer>

  <script>
    (function(){
      const iframe = document.getElementById('contentFrame');
      const menuButtons = Array.from(document.querySelectorAll('.menu-item'));
      const menuList = document.querySelector('.menu-list');
      const topMenu = document.querySelector('.top-menu');

      // 해시 라우팅 지원
      function pickFromHash(){
        const h = location.hash.replace('#','').trim();
        const btn = menuButtons.find(b => b.dataset.src.replace('./','') === h);
        return btn || menuButtons[0];
      }
      function setActive(btn){
        menuButtons.forEach(b=>b.classList.toggle('active', b===btn));
      }
      function loadSrc(src, btn){
        if (src) iframe.src = src;
        if (btn) setActive(btn);
        if (src) location.hash = src.replace('./','');
      }

      // 메뉴 높이 실측 → 콘텐츠 시작점 보정
      function applyMenuHeight(){
        const h = topMenu.getBoundingClientRect().height || parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--header2-h'));
        document.documentElement.style.setProperty('--header2-computed', h + 'px');
      }
      window.addEventListener('resize', applyMenuHeight);
      new ResizeObserver(applyMenuHeight).observe(topMenu);

      // 모바일 표 강제맞춤(A안) + 첫 대제목 여백 제거 + PC 확대(내부만)
      function enhanceIframe(){
        try{
          const doc = iframe.contentDocument || iframe.contentWindow.document;
          if(!doc) return;

          // 마진 접힘 방지 및 첫 대제목 여백 제거
          const style = doc.createElement('style');
          style.textContent = `
            body{ display: flow-root !important; }
            body > *:first-child{ margin-top:0 !important; padding-top:0 !important; }
            ._1-1-Heading:first-of-type, [class*="1-1-Heading"]:first-of-type, h1:first-of-type{
              margin-top:0 !important; padding-top:0 !important;
            }
            img[src*="0_ICON"]{ height:1em !important; width:auto !important; vertical-align:middle !important; }
            /* 모바일 임계폭 730px: 표 강제 맞춤 */
            @media (max-width:730px){
              table{ width:100% !important; table-layout:fixed !important; }
              th,td{ white-space:nowrap; text-overflow:ellipsis; overflow:hidden; padding:6px; }
              table img{ max-width:100% !important; height:auto !important; }
            }
            /* 데스크톱에서 최소 가시 폭 보장 */
            @media (min-width:1024px){
              html,body{ min-width:900px !important; }
            }
          `;
          doc.head && doc.head.appendChild(style);

          // PC에서만 내부 확대
          const isDesktop = window.matchMedia('(min-width:1024px)').matches;
          if(isDesktop){
            const b = doc.body;
            if (b){
              b.style.zoom = '1.5';
              b.style.transformOrigin = 'top left';
              if (!b.style.zoom){ // zoom 미지원 브라우저 폴백
                b.style.transform = 'scale(1.5)';
                b.style.width = 'calc(100% / 1.5)';
              }
            }
          }else{
            // 모바일은 원배율
            const b = doc.body;
            if (b){
              b.style.zoom = '';
              b.style.transform = '';
              b.style.width = '';
            }
          }
        }catch(e){}
      }
      iframe.addEventListener('load', enhanceIframe);

      // 초기 로드
      document.addEventListener('DOMContentLoaded', () => {
        applyMenuHeight();
        const btn = pickFromHash();
        if(btn){ loadSrc(btn.dataset.src, btn); }
      });

      // 메뉴 클릭
      menuButtons.forEach(btn=>{
        btn.addEventListener('click', ()=> loadSrc(btn.dataset.src, btn));
      });

      // 모바일 안전영역 + 뷰포트 보정
      function setVH(){
        const vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', vh + 'px');
      }
      window.addEventListener('resize', setVH);
      setVH();
    })();
  </script>
</body>
</html>
