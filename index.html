<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VURIX Mobile 웹 매뉴얼</title>
  <style>
    :root{
      --header1-h:56px;   /* 타이틀 바 높이 */
      --header2-h:56px;   /* 메뉴 바 기본 높이(모바일 줄바꿈 대비 실제값으로 덮어씀) */
      --header2-computed:56px;
      --footer-h:40px;    /* 푸터 높이 */
      --gap-cf:10px;      /* 콘텐츠와 푸터 사이 여백 */
      --bar-bg:#f6f6f6;
      --gh-border:#d0d7de;
      --gh-active:#0969da;
      --bp-mobile:700px;  /* 모바일 임계폭 */
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:#fff;color:#222;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic","맑은 고딕",Arial,sans-serif}

    /* PC에서 이중 스크롤 방지: 세로는 iframe만 */
    @media (min-width: 701px){
      html, body{ overflow-y: hidden; overflow-x: hidden; }
    }

    /* 상단 타이틀 */
    .top-title{
      position:fixed;top:0;left:0;right:0;height:var(--header1-h);
      background:var(--bar-bg);display:flex;align-items:center;gap:12px;
      padding:0 16px;border-bottom:none; /* 줄 제거 */
      z-index:1000;
    }
    .title-text{font-size:18px;font-weight:700;color:#111;white-space:nowrap;}

    /* 상단 메뉴 (좌측 정렬) */
    .top-menu{
      position:fixed;top:var(--header1-h);left:0;right:0;min-height:var(--header2-h);
      background:var(--bar-bg);display:flex;align-items:end;z-index:999;
      border-bottom:1px solid var(--gh-border);
      overflow:hidden; /* 스크롤바 차단 */
    }
    .menu-list{display:flex;gap:16px;padding:0 12px;height:100%;align-items:end;justify-content:flex-start;flex-wrap:nowrap;margin:0;}
    .menu-item{
      position:relative;background:transparent;border:0;cursor:pointer;
      padding:0 10px 12px 10px;height:100%;display:flex;align-items:end;
      font-size:15px;color:#24292f;border-radius:0;white-space:nowrap;
    }
    .menu-item:hover{color:#111;}
    .menu-item.active{color:#111;font-weight:600;}
    .menu-item.active::after{content:"";position:absolute;left:8px;right:8px;bottom:-1px;height:2px;background:var(--gh-active);}

    /* 콘텐츠 영역 */
    .content-wrap{
      position:fixed;left:0;right:0;
      top:calc(var(--header1-h) + var(--header2-computed));
      bottom:calc(var(--footer-h) + var(--gap-cf));
      padding-left:5px; padding-right:5px;
      background:#fff;
    }
    .content-inner{width:100%;height:100%;}
    iframe#contentFrame{width:100%;height:100%;border:0;background:#fff;display:block;}

    /* 하단 고정바 */
    .footer{
      position:fixed;left:0;right:0;bottom:0;height:var(--footer-h);
      background:#fff;border-top:none;
      display:flex;align-items:center;justify-content:flex-start;
      padding-left:5px;font-size:12px;color:#666;z-index:1000;
    }

    /* 모바일: 메뉴 줄바꿈 */
    @media (max-width: 700px){
      :root{ --header2-h:56px; }
      .menu-list{ flex-wrap:wrap; row-gap:6px; }
      .menu-item{ padding:0 8px 10px 8px; font-size:14px; }
    }
  </style>
</head>
<body>
  <!-- 상단 고정바 -->
  <header class="top-title" role="banner">
    <span class="title-text">VURIX Mobile</span>
  </header>
  <nav class="top-menu" role="navigation" aria-label="주 메뉴">
    <div class="menu-list" id="menuList">
      <button class="menu-item" data-src="./start.html">시작</button>
      <button class="menu-item" data-src="./live.html">실시간 영상</button>
      <button class="menu-item" data-src="./recorded.html">녹화 영상</button>
      <button class="menu-item" data-src="./event.html">이벤트</button>
      <button class="menu-item" data-src="./setup.html">설정</button>
      <button class="menu-item" data-src="./other.html">기타</button>
      <button class="menu-item" data-src="./info.html">참고</button>
    </div>
  </nav>

  <!-- 중앙 콘텐츠 -->
  <main class="content-wrap" role="main">
    <div class="content-inner">
      <iframe id="contentFrame" title="콘텐츠 프레임" src="" loading="lazy" referrerpolicy="no-referrer"></iframe>
    </div>
  </main>

  <!-- 하단바 -->
  <footer class="footer" role="contentinfo">©2025 Innodep, Inc.</footer>

  <script>
  (function(){
    var BP = 700; // 모바일 임계폭
    var iframe = document.getElementById('contentFrame');
    var menuButtons = Array.prototype.slice.call(document.querySelectorAll('.menu-item'));
    var topMenu = document.querySelector('.top-menu');
    var menuList = document.getElementById('menuList');

    function measureMenuHeight(){
      var h2 = topMenu.getBoundingClientRect().height;
      document.documentElement.style.setProperty('--header2-computed', h2 + 'px');
    }

    function setActive(btn){
      menuButtons.forEach(function(b){ b.classList.toggle('active', b===btn); });
    }

    function loadSrc(src, btn){
      if (iframe.src.indexOf(src) === -1) {
        iframe.src = src;
      }
      if (btn) setActive(btn);
      // 주소 해시 동기화
      if (location.hash !== '#' + src.replace('./','')) {
        location.hash = src.replace('./','');
      }
    }

    // 해시 라우팅
    function applyHash(){
      var hash = (location.hash || '').replace(/^#/, '');
      var btn = menuButtons.find(function(b){ return b.getAttribute('data-src').replace('./','') === hash; });
      if (btn) {
        loadSrc(btn.getAttribute('data-src'), btn);
      } else {
        // 기본: start.html
        var defaultBtn = menuButtons[0];
        loadSrc(defaultBtn.getAttribute('data-src'), defaultBtn);
      }
    }

    // 아이콘/타이포/표/여백 보정 주입
    function injectStylesInto(doc){
      if (!doc) return;
      try{
        var isMobile = window.matchMedia('(max-width: ' + BP + 'px)').matches;

        // 공통 유틸 스타일
        var common = [];
        common.push('body{display:flow-root !important;}');
        common.push('img[src*="0_ICON"]{height:1em; width:auto; vertical-align:middle;}');
        common.push('body > *:first-child{margin-top:0 !important;}');
        common.push('._1-1-Heading:first-of-type, [class*="01-1-Heading"]:first-of-type{margin-top:0 !important; padding-top:0 !important;}');

        // PC/모바일 타이포 매핑 (rem + line-height)
        var pc = [];
        pc.push('[class~="01-1-Heading"], [class~="01-1-Heading"] * { font-size:3.125rem !important; line-height:1.25 !important; }');
        pc.push('[class~="01-2-Heading"], [class~="01-2-Heading"] * { font-size:2.8125rem !important; line-height:1.28 !important; }');
        pc.push('[class~="01-3-Heading"], [class~="01-3-Heading"] * { font-size:2.5rem !important; line-height:1.3 !important; }');
        var bodyPCSize = '2.1875rem'; /* 35px */
        var bodyPCLH = '1.6';
        var smallPCSize = '2.0625rem'; /* 33px */
        var smallPCLH = '1.7';
        var bodyClasses = ["02-1-Basic-L","02-2-Basic-L-Sub","02-3-Basic-L-Center","03-1-Num","03-2-Num(2-9)","03-3-Num(10)","04-1-Bull-L","04-2-Bull-L-Sub","04-3-Bull-L-Sub(H)","05-1-Bold","05-2-Bold-Sub","05-3-Bold-Center","05-4-Bold-Bull","06-1-Note-B","06-2-Note-Bull-L","06-3-Info-L","07-1-Ring-B","07-2-Ring-B-Sub"];
        for (var i=0;i<bodyClasses.length;i++){
          var c = bodyClasses[i];
          pc.push('[class~="'+c+'"], [class~="'+c+'"] * { font-size:'+bodyPCSize+' !important; line-height:'+bodyPCLH+' !important; }');
        }
        var smallClasses = ["08-1-Small-L","08-2-Small-L-Sub","08-3-Small-L-Center","08-4-Small-B-Center","08-5-Small-Bull-L"];
        for (var j=0;j<smallClasses.length;j++){
          var s = smallClasses[j];
          pc.push('[class~="'+s+'"], [class~="'+s+'"] * { font-size:'+smallPCSize+' !important; line-height:'+smallPCLH+' !important; }');
        }

        var mobile = [];
        mobile.push('[class~="01-1-Heading"], [class~="01-1-Heading"] * { font-size:1.75rem !important; line-height:1.3 !important; }');
        mobile.push('[class~="01-2-Heading"], [class~="01-2-Heading"] * { font-size:1.5rem !important; line-height:1.3 !important; }');
        mobile.push('[class~="01-3-Heading"], [class~="01-3-Heading"] * { font-size:1.25rem !important; line-height:1.35 !important; }');
        var bodyMSize = '1.125rem'; /* 18px */
        var bodyMLH = '1.7';
        var smallMSize = '1rem'; /* 16px */
        var smallMLH = '1.75';
        for (var k=0;k<bodyClasses.length;k++){
          var cb = bodyClasses[k];
          mobile.push('[class~="'+cb+'"], [class~="'+cb+'"] * { font-size:'+bodyMSize+' !important; line-height:'+bodyMLH+' !important; }');
        }
        for (var m=0;m<smallClasses.length;m++){
          var sb = smallClasses[m];
          mobile.push('[class~="'+sb+'"], [class~="'+sb+'"] * { font-size:'+smallMSize+' !important; line-height:'+smallMLH+' !important; }');
        }

        // 모바일 표 대응: 100% 폭 + 줄바꿈
        var mobileTable = [];
        mobileTable.push('table{ width:100% !important; table-layout:auto !important; }');
        mobileTable.push('th, td{ white-space:normal !important; overflow-wrap:anywhere !important; word-break:break-word !important; text-overflow:clip !important; padding:6px; }');
        mobileTable.push('table img{ max-width:100% !important; height:auto !important; }');

        // 내부 최소 폭(PC에서 글자 줄어듦 방지)
        if (!isMobile){
          if (doc.documentElement) doc.documentElement.style.minWidth = '900px';
        }

        var style = doc.createElement('style');
        var css = [];
        Array.prototype.push.apply(css, common);
        if (isMobile){
          Array.prototype.push.apply(css, mobile);
          Array.prototype.push.apply(css, mobileTable);
        } else {
          Array.prototype.push.apply(css, pc);
        }
        style.textContent = css.join('\n');
        if (doc.head) doc.head.appendChild(style);
      }catch(e){}
    }

    function onIframeLoad(){
      try{
        var doc = iframe.contentDocument || iframe.contentWindow.document;
        injectStylesInto(doc);
      }catch(e){}
    }

    iframe.addEventListener('load', onIframeLoad);

    // 메뉴 클릭
    menuButtons.forEach(function(btn){
      btn.addEventListener('click', function(){
        loadSrc(btn.getAttribute('data-src'), btn);
      });
    });

    // 해시 변경 시 반영
    window.addEventListener('hashchange', function(){ applyHash(); });

    // 초기 설정
    document.addEventListener('DOMContentLoaded', function(){
      measureMenuHeight();
      applyHash();
    });

    // 리사이즈 시 메뉴 높이 갱신
    window.addEventListener('resize', function(){
      measureMenuHeight();
    });

    // 메뉴 폭 변화에도 반영
    if (window.ResizeObserver){
      var ro = new ResizeObserver(function(){ measureMenuHeight(); });
      ro.observe(menuList);
    }
  })();
  </script>
</body>
</html>
