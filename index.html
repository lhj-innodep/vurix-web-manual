<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VURIX Mobile 웹 매뉴얼</title>
  <style>
    :root{
      --header1-h:56px;    /* 타이틀 바 높이 */
      --header2-h:56px;    /* 메뉴 바 높이(여유) */
      --header2-computed:56px; /* JS가 실제 높이 반영 */
      --footer-h:40px;     /* 푸터 높이 */
      --bar-bg:#f6f6f6;
      --gh-border:#d0d7de;
      --gh-active:#0969da;
      --gap-cf:10px;       /* 콘텐츠-푸터 간격 */
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:#fff;color:#222;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic","맑은 고딕",Arial,sans-serif}

    /* 상단 타이틀 */
    .top-title{
      position:fixed;top:0;left:0;right:0;height:var(--header1-h);
      background:var(--bar-bg);display:flex;align-items:center;gap:12px;
      padding:0 12px;border-bottom:none;z-index:1000;
    }
    .title-text{font-size:18px;font-weight:700;color:#111;white-space:nowrap;}

    /* 상단 메뉴 */
    .top-menu{
      position:fixed;top:var(--header1-h);left:0;right:0;min-height:var(--header2-h);
      background:var(--bar-bg);display:flex;align-items:end;z-index:999;
      border-bottom:1px solid var(--gh-border);overflow:hidden;
    }
    .menu-list{
      display:flex;gap:16px;padding:0 12px 0 12px;height:100%;align-items:end;
      justify-content:flex-start;flex-wrap:nowrap;margin:0;
    }
    .menu-item{
      position:relative;background:transparent;border:0;cursor:pointer;
      padding:0 10px 10px 10px;height:100%;display:flex;align-items:end;
      font-size:15px;color:#24292f;border-radius:0;white-space:nowrap;
    }
    .menu-item:hover{color:#111;}
    .menu-item.active{color:#111;font-weight:600;}
    .menu-item.active::after{
      content:"";position:absolute;left:8px;right:8px;bottom:-1px;height:2px;background:var(--gh-active);
    }

    /* 콘텐츠 영역 */
    .content-wrap{
      position:fixed;left:0;right:0;
      top:calc(var(--header1-h) + var(--header2-computed));
      bottom:calc(var(--footer-h) + var(--gap-cf));
      padding-left:5px;padding-right:5px;background:#fff;
    }
    .content-inner{width:100%;height:100%;}
    #contentFrame{width:100%;height:100%;border:none;background:#fff;display:block;}

    /* 푸터 */
    .footer{
      position:fixed;left:0;right:0;bottom:0;height:var(--footer-h);
      background:#fff;border-top:none;display:flex;align-items:center;
      justify-content:flex-start;padding-left:5px;font-size:12px;color:#666;z-index:1000;
    }

    /* 모바일: 700px 이하에서 메뉴 줄바꿈 */
    @media (max-width:700px){
      :root{--header1-h:52px;--header2-h:56px;--footer-h:40px;}
      .menu-item{font-size:14px;padding:0 8px 10px 8px;}
      .menu-list{flex-wrap:wrap;row-gap:6px;justify-content:flex-start;}
    }
  </style>
</head>
<body>
  <header class="top-title"><span class="title-text">VURIX Mobile</span></header>
  <nav class="top-menu" aria-label="주 메뉴">
    <div class="menu-list">
      <button class="menu-item" data-src="./start.html">시작</button>
      <button class="menu-item" data-src="./live.html">실시간 영상</button>
      <button class="menu-item" data-src="./recorded.html">녹화 영상</button>
      <button class="menu-item" data-src="./event.html">이벤트</button>
      <button class="menu-item" data-src="./setup.html">설정</button>
      <button class="menu-item" data-src="./other.html">기타</button>
      <button class="menu-item" data-src="./info.html">참고</button>
    </div>
  </nav>

  <main class="content-wrap"><div class="content-inner">
    <iframe id="contentFrame" title="콘텐츠 프레임" src="" loading="lazy" referrerpolicy="no-referrer"></iframe>
  </div></main>

  <footer class="footer">©2025 Innodep, Inc.</footer>

  <script>
  (function(){
    const iframe = document.getElementById('contentFrame');
    const menuButtons = Array.from(document.querySelectorAll('.menu-item'));
    const menuList = document.querySelector('.menu-list');
    const topMenu = document.querySelector('.top-menu');

    /* 해시로 페이지 선택 */
    function pickFromHash(){
      const hash = location.hash ? location.hash.replace(/^#/, '') : '';
      const btn = menuButtons.find(b => b.dataset.src.replace('./','') === hash);
      if(btn){ loadSrc(btn.dataset.src, btn, false); }
      else { // 기본 시작
        const first = menuButtons[0];
        loadSrc(first.dataset.src, first, false);
        location.hash = first.dataset.src.replace('./','');
      }
    }

    function setActive(btn){
      menuButtons.forEach(b=>b.classList.toggle('active', b===btn));
    }

    function loadSrc(src, btn, updateHash=true){
      iframe.src = src;
      if(btn) setActive(btn);
      if(updateHash) location.hash = src.replace('./','');
    }

    // 메뉴 클릭
    menuButtons.forEach(btn=> btn.addEventListener('click', ()=> loadSrc(btn.dataset.src, btn)));

    // 상단 메뉴 실제 높이로 콘텐츠 시작점 보정
    function applyHeaderHeight(){
      const h = topMenu.getBoundingClientRect().height;
      document.documentElement.style.setProperty('--header2-computed', h + 'px');
    }
    window.addEventListener('resize', applyHeaderHeight);
    new ResizeObserver(applyHeaderHeight).observe(menuList);

    // PC 전용 폰트 재정의 CSS 생성
    const FONT_RULES = [
      ["01-1-Heading",50],
      ["01-2-Heading",45],
      ["01-3-Heading",40],
      ["02-1-Basic-L",35],
      ["02-2-Basic-L-Sub",35],
      ["02-3-Basic-L-Center",35],
      ["03-1-Num",35],
      ["03-2-Num(2-9)",35],
      ["03-3-Num(10)",35],
      ["04-1-Bull-L",35],
      ["04-2-Bull-L-Sub",35],
      ["04-3-Bull-L-Sub(H)",35],
      ["05-1-Bold",35],
      ["05-2-Bold-Sub",35],
      ["05-3-Bold-Center",35],
      ["05-4-Bold-Bull",35],
      ["06-1-Note-B",35],
      ["06-2-Note-Bull-L",35],
      ["06-3-Info-L",35],
      ["07-1-Ring-B",35],
      ["07-2-Ring-B-Sub",35],
      ["08-1-Small-L",33],
      ["08-2-Small-L-Sub",33],
      ["08-3-Small-L-Center",33],
      ["08-4-Small-B-Center",33],
      ["08-5-Small-Bull-L",33]
    ];

    function buildFontCSS(){
      let css = '/* PC 전용 폰트 재정의 */\\n@media (min-width: 701px){\\n';
      FONT_RULES.forEach(([name, size]) => {
        const safe = name.replace(/([\\\\[\\].+*?^${}()|\\/-])/g, '\\\\$1'); // escape for regex; we'll use attr contains
        // 대상 클래스와 그 후손까지 덮어쓰되, 이미지/figure에는 영향 없음
        css += `[class*="${safe}"], [class*="${safe}"] *{ font-size:${size}px !important; line-height:1.5 !important; }\\n`;
      });
      // 가운데 정렬 스타일 유지
      css += `[class*="Center"]{ text-align:center !important; }\\n`;
      // 첫 대제목 위여백 제거 + 마진 접힘 차단
      css += `body{ display: flow-root !important; } body > *:first-child{ margin-top:0 !important; } ._1-1-Heading:first-of-type{ margin-top:0 !important; }\\n`;
      css += `}\\n`;
      return css;
    }

    // 모바일 표 강제 맞춤 + 줄바꿈 (≤700px)
    const MOBILE_TABLE_CSS = `@media (max-width:700px){
      table{ width:100% !important; table-layout:auto !important; }
      th,td{ white-space:normal !important; overflow-wrap:anywhere !important; word-break:break-word !important; text-overflow:clip !important; padding:6px; }
      table img{ max-width:100% !important; height:auto !important; }
    }`;

    function injectStyle(doc, css){
      const style = doc.createElement('style');
      style.textContent = css;
      (doc.head || doc.documentElement).appendChild(style);
    }

    // iframe 로드 후 내부 개선
    function onIframeLoad(){
      applyHeaderHeight();
      try{
        const doc = iframe.contentDocument || iframe.contentWindow.document;
        if(!doc) return;

        // 아이콘 리사이즈
        const icons = doc.querySelectorAll('img[src*="0_ICON"]');
        icons.forEach(img => { img.style.height='1em'; img.style.width='auto'; img.style.verticalAlign='middle'; });

        // 폰트 오버라이드 + 첫 대제목 여백 제거
        injectStyle(doc, buildFontCSS());

        // 모바일 표 스타일
        injectStyle(doc, MOBILE_TABLE_CSS);
      }catch(e){}
    }
    iframe.addEventListener('load', onIframeLoad);

    // 초기 구동
    window.addEventListener('DOMContentLoaded', ()=>{
      applyHeaderHeight();
      pickFromHash();
    });
    window.addEventListener('hashchange', pickFromHash);
  })();
  </script>
</body>
</html>